package Singleton_1;

public class SingletonJ {

	public static void main(String[] args)  {
		// TODO Auto-generated method stub

		
		Singleton[] mySingletonArray = new Singleton[5];//Array of objects
		
		for(int i = 0;i<5;i++){
			mySingletonArray[i] = Singleton.Instance();//get 5 singletons
			System.out.print("Obj. local "+System.identityHashCode(mySingletonArray[i]));// check to see if their address is the same
			System.out.print("\t birthdate: "+mySingletonArray[i].startTime);
			System.out.print("\t whith address: "+System.identityHashCode(mySingletonArray[i].startTime));
		}
	}
}

class Singleton 
{
	
	public static Singleton Instance()  {
     if (_instance == null) {
         synchronized (Singleton.class) {
        	
        	 //----- Second lock -----
             if (_instance == null) {
            	 
                 _instance = new Singleton();
                 _instance.startTime = System.currentTimeMillis();
                 System.out.println("New object "+System.identityHashCode(_instance)+" Born on "+_instance.startTime);// print if made new
             }
             
          }
     }
     return _instance;      
 }
 protected Singleton() {}
 private static Singleton _instance = null;
 public long startTime = 0;
}
